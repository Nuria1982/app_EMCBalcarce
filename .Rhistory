runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
balcarce_EMC <- read_excel("balcarce_EMC.xlsx",
col_types = c("date", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"text", "numeric", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric"))
datos <- balcarce_EMC
datos <- subset(datos, select = -c(Direccion_Viento_200cm, Direccion_Viento_1000cm))
datos$Fecha <- as.Date(datos$Fecha, format = "%Y-%m-%d")
datos <- datos[order(datos$Fecha, decreasing = TRUE), ]
datos_actuales <- datos[!is.na(datos$Precipitacion_Pluviometrica) &
!is.na(datos$Temperatura_Abrigo_150cm_Maxima) &
!is.na(datos$Temperatura_Abrigo_150cm_Minima), ]
ultima_fecha <- max(datos_actuales$Fecha)
ultimos_datos <- datos_actuales[datos_actuales$Fecha == ultima_fecha, ]
lluvia_ultimo_dia <- ultimos_datos$Precipitacion_Pluviometrica
Tmax_ultimo_dia <- ultimos_datos$Temperatura_Abrigo_150cm_Maxima
Tmin_ultimo_dia <- ultimos_datos$Temperatura_Abrigo_150cm_Minima
datos_historicos <- datos %>%
filter(Año >= 1991 & Año <= 2020)
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
df_siembra$GD_acum
datos_filtrados
datos_filtrados <- datos_filtrados %>%
left_join(datos_historicos_avg, by = "Dia_Mes") %>%
arrange(Fecha) %>%
mutate(
Temperatura_Abrigo_150cm = coalesce(Temperatura_Abrigo_150cm, Temperatura_media),
Evapotranspiracion_Potencial = coalesce(Evapotranspiracion_Potencial, Evapotranspiracion_media),
Precipitacion_Pluviometrica = coalesce(Precipitacion_Pluviometrica, Precipitacion_media),
TTB = if_else(Temperatura_Abrigo_150cm - 8 < 0,
0,
Temperatura_Abrigo_150cm - 8),
GD_acum = cumsum(TTB),
Ttrelativo = GD_acum / 1890,
Kc = if_else(Ttrelativo > 0.16,
2.988041 * Ttrelativo^4 - 4.052411 * Ttrelativo^3 - 3.999317 * Ttrelativo^2 + 6.015032 * Ttrelativo - 0.390632,
0.4),
ETM = Kc * Evapotranspiracion_Potencial,
Fr_agua_util = NA_real_,
agua_util = NA_real_,
ETR = NA_real_,
deficiencia = NA_real_
)
datos_filtrados <- datos %>%
filter(Fecha >= fecha_siembra) %>%
select(Fecha, Temperatura_Abrigo_150cm, Precipitacion_Pluviometrica, Evapotranspiracion_Potencial)
fecha_siembra <- as.Date(input$fecha_siembra)
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
datos_filtrados <- datos %>%
filter(Fecha >= fecha_siembra) %>%
select(Fecha, Temperatura_Abrigo_150cm, Precipitacion_Pluviometrica, Evapotranspiracion_Potencial)
fecha_siembra <- as.Date(2023-10-23)
datos_filtrados <- datos %>%
filter(Fecha >= fecha_siembra) %>%
select(Fecha, Temperatura_Abrigo_150cm, Precipitacion_Pluviometrica, Evapotranspiracion_Potencial)
datos_filtrados <- datos_filtrados %>%
mutate(Dia_Mes = format(Fecha, "%m-%d"))
datos_historicos_avg <- datos_historicos %>%
mutate(Dia_Mes = format(Fecha, "%m-%d")) %>%
group_by(Dia_Mes) %>%
summarise(
Temperatura_media = mean(Temperatura_Abrigo_150cm, na.rm = TRUE),
Evapotranspiracion_media = mean(Evapotranspiracion_Potencial, na.rm = TRUE),
Precipitacion_media = mean(Precipitacion_Pluviometrica, na.rm = TRUE),
.groups = "drop"
)
datos_filtrados <- datos_filtrados %>%
left_join(datos_historicos_avg, by = "Dia_Mes") %>%
arrange(Fecha) %>%
mutate(
Temperatura_Abrigo_150cm = coalesce(Temperatura_Abrigo_150cm, Temperatura_media),
Evapotranspiracion_Potencial = coalesce(Evapotranspiracion_Potencial, Evapotranspiracion_media),
Precipitacion_Pluviometrica = coalesce(Precipitacion_Pluviometrica, Precipitacion_media),
TTB = if_else(Temperatura_Abrigo_150cm - 8 < 0,
0,
Temperatura_Abrigo_150cm - 8),
GD_acum = cumsum(TTB),
Ttrelativo = GD_acum / 1890,
Kc = if_else(Ttrelativo > 0.16,
2.988041 * Ttrelativo^4 - 4.052411 * Ttrelativo^3 - 3.999317 * Ttrelativo^2 + 6.015032 * Ttrelativo - 0.390632,
0.4),
ETM = Kc * Evapotranspiracion_Potencial,
Fr_agua_util = NA_real_,
agua_util = NA_real_,
ETR = NA_real_,
deficiencia = NA_real_
)
datos_filtrados$Fr_agua_util[1] <- fraccion_inicial
datos_filtrados$agua_util[1] <- fraccion_inicial * agua_util_total_val
fraccion_inicial <- 0.5
agua_util_total_val <- 162
disminucion_et_val <- 1.2
datos_filtrados <- datos_filtrados %>%
left_join(datos_historicos_avg, by = "Dia_Mes") %>%
arrange(Fecha) %>%
mutate(
Temperatura_Abrigo_150cm = coalesce(Temperatura_Abrigo_150cm, Temperatura_media),
Evapotranspiracion_Potencial = coalesce(Evapotranspiracion_Potencial, Evapotranspiracion_media),
Precipitacion_Pluviometrica = coalesce(Precipitacion_Pluviometrica, Precipitacion_media),
TTB = if_else(Temperatura_Abrigo_150cm - 8 < 0,
0,
Temperatura_Abrigo_150cm - 8),
GD_acum = cumsum(TTB),
Ttrelativo = GD_acum / 1890,
Kc = if_else(Ttrelativo > 0.16,
2.988041 * Ttrelativo^4 - 4.052411 * Ttrelativo^3 - 3.999317 * Ttrelativo^2 + 6.015032 * Ttrelativo - 0.390632,
0.4),
ETM = Kc * Evapotranspiracion_Potencial,
Fr_agua_util = NA_real_,
agua_util = NA_real_,
ETR = NA_real_,
deficiencia = NA_real_
)
datos_filtrados <- datos %>%
filter(Fecha >= fecha_siembra) %>%
select(Fecha, Temperatura_Abrigo_150cm, Precipitacion_Pluviometrica, Evapotranspiracion_Potencial)
datos_filtrados <- datos_filtrados %>%
mutate(Dia_Mes = format(Fecha, "%m-%d"))
datos_historicos_avg <- datos_historicos %>%
mutate(Dia_Mes = format(Fecha, "%m-%d")) %>%
group_by(Dia_Mes) %>%
summarise(
Temperatura_media = mean(Temperatura_Abrigo_150cm, na.rm = TRUE),
Evapotranspiracion_media = mean(Evapotranspiracion_Potencial, na.rm = TRUE),
Precipitacion_media = mean(Precipitacion_Pluviometrica, na.rm = TRUE),
.groups = "drop"
)
fraccion_inicial <- 0.5
agua_util_total_val <- 162
disminucion_et_val <- 1.2
datos_filtrados <- datos_filtrados %>%
left_join(datos_historicos_avg, by = "Dia_Mes") %>%
arrange(Fecha) %>%
mutate(
Temperatura_Abrigo_150cm = coalesce(Temperatura_Abrigo_150cm, Temperatura_media),
Evapotranspiracion_Potencial = coalesce(Evapotranspiracion_Potencial, Evapotranspiracion_media),
Precipitacion_Pluviometrica = coalesce(Precipitacion_Pluviometrica, Precipitacion_media),
TTB = if_else(Temperatura_Abrigo_150cm - 8 < 0,
0,
Temperatura_Abrigo_150cm - 8),
GD_acum = cumsum(TTB),
Ttrelativo = GD_acum / 1890,
Kc = if_else(Ttrelativo > 0.16,
2.988041 * Ttrelativo^4 - 4.052411 * Ttrelativo^3 - 3.999317 * Ttrelativo^2 + 6.015032 * Ttrelativo - 0.390632,
0.4),
ETM = Kc * Evapotranspiracion_Potencial,
Fr_agua_util = NA_real_,
agua_util = NA_real_,
ETR = NA_real_,
deficiencia = NA_real_
)
datos_filtrados$Fr_agua_util[1] <- fraccion_inicial
datos_filtrados$agua_util[1] <- fraccion_inicial * agua_util_total_val
for (i in 2:nrow(datos_filtrados)) {
if (datos_filtrados$GD_acum[i - 1] > 1890) {
break
}
datos_filtrados$ETR[i] <- if_else(
is.na(datos_filtrados$Fr_agua_util[i - 1]) | is.na(datos_filtrados$ETM[i]),
NA_real_,
if_else(
datos_filtrados$Fr_agua_util[i - 1] >= input$umbral_et,
datos_filtrados$ETM[i],
disminucion_et_val * datos_filtrados$Fr_agua_util[i - 1] * datos_filtrados$ETM[i]
)
)
datos_filtrados$agua_util[i] <- if_else(
is.na(datos_filtrados$agua_util[i - 1]) | is.na(datos_filtrados$Precipitacion_Pluviometrica[i]) | is.na(datos_filtrados$ETR[i]),
NA_real_,
if_else(
datos_filtrados$agua_util[i - 1] + datos_filtrados$Precipitacion_Pluviometrica[i] - datos_filtrados$ETR[i] > agua_util_total_val,
agua_util_total_val,
datos_filtrados$agua_util[i - 1] + datos_filtrados$Precipitacion_Pluviometrica[i] - datos_filtrados$ETR[i]
)
)
datos_filtrados$Fr_agua_util[i] <- if_else(
is.na(datos_filtrados$agua_util[i]) | is.na(agua_util_total_val),
NA_real_,
datos_filtrados$agua_util[i] / agua_util_total_val
)
datos_filtrados$deficiencia[i] <- if_else(
is.na(datos_filtrados$ETR[i]) | is.na(datos_filtrados$ETM[i]),
NA_real_,
datos_filtrados$ETR[i] - datos_filtrados$ETM[i]
)
}
View(datos_filtrados)
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
fecha_min <- min(df_siembra$Fecha[df_siembra$GD_acum >= 670], na.rm = TRUE)
agua_util <- ggplot(datos_filtrados, aes(x = Fecha)) +
geom_line(aes(y = Fr_agua_util , color = "Fr_agua_util")) +
geom_rect(aes(xmin = fecha_min,
xmax = fecha_max,
ymin = -Inf,
ymax = Inf),
fill = "blue",
alpha = 0.2,
color = NA) +
labs(title = "", x = "",
y = "Fracción de Agua Útil (0 - 1)") +
theme_minimal() +
scale_color_manual(values = c("#E9C46A")) +
guides(color = "none") +
coord_cartesian(ylim = c(0, NA))
agua_util
fecha_min <- min(datos_filtrados$Fecha[datos_filtrados$GD_acum >= 670],
na.rm = TRUE)
fecha_max <- max(datos_filtrados$Fecha[datos_filtradosa$GD_acum <= 1120],
na.rm = TRUE)
fecha_max <- max(datos_filtrados$Fecha[datos_filtrados$GD_acum <= 1120],
na.rm = TRUE)
agua_util <- ggplot(datos_filtrados, aes(x = Fecha)) +
geom_line(aes(y = Fr_agua_util , color = "Fr_agua_util")) +
geom_rect(aes(xmin = fecha_min,
xmax = fecha_max,
ymin = -Inf,
ymax = Inf),
fill = "blue",
alpha = 0.2,
color = NA) +
labs(title = "", x = "",
y = "Fracción de Agua Útil (0 - 1)") +
theme_minimal() +
scale_color_manual(values = c("#E9C46A")) +
guides(color = "none") +
coord_cartesian(ylim = c(0, NA))
agua_util
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
runApp('E:/TRABAJO/CERBAS/GrupoAgrometeorologia/App_Meteo')
balcarce_EMC <- read_excel("balcarce_EMC.xlsx",
col_types = c("date", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"text", "numeric", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric"))
library(rsconnect)
library(sendmailR)
library(shiny)
library(shinyWidgets)
library(shinydashboard)
library(shinycssloaders)
library(DT)
library(tidyr)
library(ggplot2)
library(plotly)
library(dplyr)
library(bslib)
library(shinythemes)
library(bs4Dash)
library(lubridate)
library(png)
library(readxl)
balcarce_EMC <- read_excel("balcarce_EMC.xlsx",
col_types = c("date", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"text", "numeric", "text", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric"))
datos <- balcarce_EMC
datos <- subset(datos, select = -c(Direccion_Viento_200cm, Direccion_Viento_1000cm))
datos$Fecha <- as.Date(datos$Fecha, format = "%Y-%m-%d")
datos <- datos[order(datos$Fecha, decreasing = TRUE), ]
datos_actuales <- datos[!is.na(datos$Precipitacion_Pluviometrica) &
!is.na(datos$Temperatura_Abrigo_150cm_Maxima) &
!is.na(datos$Temperatura_Abrigo_150cm_Minima), ]
ultima_fecha <- max(datos_actuales$Fecha)
ultimos_datos <- datos_actuales[datos_actuales$Fecha == ultima_fecha, ]
lluvia_ultimo_dia <- ultimos_datos$Precipitacion_Pluviometrica
Tmax_ultimo_dia <- ultimos_datos$Temperatura_Abrigo_150cm_Maxima
Tmin_ultimo_dia <- ultimos_datos$Temperatura_Abrigo_150cm_Minima
datos_historicos <- datos %>%
filter(Año >= 1991 & Año <= 2020)
current_year <- max(datos_actuales$Año)
pp_acum <- sum(subset(datos_actuales, Año == current_year)$Precipitacion_Pluviometrica)
pp_acum
current_year
datos
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
datos
runApp()
View(datos_filtrados)
runApp()
datos_filtrados
runApp()
runApp()
runApp()
runApp()
datos
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(patchwork)
runApp()
shiny::runApp()
runApp()
historicos_long <- historicos_periodo_critico %>%
pivot_longer(cols = c(radiacion_global_media, dias_mayores_35),
names_to = "variable",
values_to = "valor")
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
datos_historicos_avg
runApp()
runApp()
runApp()
runApp()
runApp()
historicos_long <- historicos_periodo_critico %>%
pivot_longer(cols = c(radiacion_global_media, dias_mayores_35),
names_to = "variable",
values_to = "valor")
rad_temp
print(rad_temp)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
datos_historicos_avg
runApp()
runApp()
runApp()
datos_historicos_avg <- datos_historicos_avg %>%
mutate(Dia_Mes = as.Date(paste("2023", Dia_Mes), format = "%Y %d-%m")) %>%
mutate(Mes = month(Dia_Mes, label = TRUE))
datos_historicos_avg
datos_historicos_avg <- datos_historicos_avg %>%
mutate(Dia_Mes = as.Date(Dia_Mes), format = "%d-%m")) %>%
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
